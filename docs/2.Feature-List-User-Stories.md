# FEATURE LIST & USER STORIES
## Full-Stack E-Commerce & Service Platform
**PostgreSQL + GCS + Vercel Stack**

**Document Version:** 1.0  
**Date:** December 9, 2025  
**Status:** Complete Feature Coverage (100%)

---

## PART 1: FEATURE BREAKDOWN BY ROLE

### 1.1 CUSTOMER / SHOP OWNER

#### Core Features
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F1 | User Registration | Email + password signup with verification | ðŸ”´ P0 | TBD |
| F2 | Email Verification | Confirm email before account activation | ðŸ”´ P0 | TBD |
| F3 | Admin Approval | Wait for admin approval before access | ðŸ”´ P0 | TBD |
| F4 | User Login | Credentials login with JWT | ðŸ”´ P0 | TBD |
| F5 | User Profile | View/edit name, email, phone, address | ðŸŸ  P1 | TBD |
| F6 | Profile Picture Upload | Avatar image to GCS | ðŸŸ¡ P2 | TBD |
| F7 | Password Reset | Forgot password flow via email | ðŸŸ  P1 | TBD |
| F8 | Session Management | 30-day JWT session, auto-logout | ðŸŸ  P1 | TBD |
| F9 | Two-Factor Auth (Optional) | SMS/Email OTP (future) | ðŸ”µ P3 | TBD |

#### Food Shopping
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F10 | Browse Food Items | View all food catalog | ðŸ”´ P0 | TBD |
| F11 | Filter by Category | Beef, Spices, Grains, etc. | ðŸ”´ P0 | TBD |
| F12 | Filter by Price Range | Min-max price filter | ðŸŸ  P1 | TBD |
| F13 | Search Food Items | Full-text search on name/description | ðŸ”´ P0 | TBD |
| F14 | View Item Details | Image (GCS), price, stock, description | ðŸ”´ P0 | TBD |
| F15 | Item Ratings & Reviews | Customer reviews (future phase) | ðŸŸ¡ P2 | TBD |
| F16 | View Item Photos | GCS CDN delivery, fast loading | ðŸ”´ P0 | TBD |

#### Shopping Cart
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F17 | Add to Cart | Select quantity + add (Redux) | ðŸ”´ P0 | TBD |
| F18 | Remove from Cart | Delete items | ðŸ”´ P0 | TBD |
| F19 | Update Quantity | Increase/decrease in cart | ðŸ”´ P0 | TBD |
| F20 | Cart Persistence | Saved in localStorage + Redux | ðŸ”´ P0 | TBD |
| F21 | Real-time Price Update | Recalculate total on changes | ðŸŸ  P1 | TBD |
| F22 | Cart Summary | Items, quantities, subtotal, tax | ðŸ”´ P0 | TBD |
| F23 | Empty Cart | Clear all items | ðŸŸ  P1 | TBD |
| F24 | Bulk Add to Cart | Add multiple items at once (future) | ðŸ”µ P3 | TBD |

#### Checkout & Ordering
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F25 | Delivery Address Entry | Form with validation | ðŸ”´ P0 | TBD |
| F26 | Address Validation | Check if address valid in service area | ðŸŸ  P1 | TBD |
| F27 | Address Autocomplete | Google Maps integration (future) | ðŸŸ¡ P2 | TBD |
| F28 | Save Multiple Addresses | Favorite addresses | ðŸŸ  P1 | TBD |
| F29 | Order Summary Review | Itemized breakdown | ðŸ”´ P0 | TBD |
| F30 | Upload Order Photo | Attach image (GCS) for special requests | ðŸŸ¡ P2 | TBD |
| F31 | Order Special Requests | Text notes (less spicy, etc.) | ðŸŸ  P1 | TBD |
| F32 | Create Order | Submit order with validation | ðŸ”´ P0 | TBD |
| F33 | Order Confirmation Email | Receipt with order details | ðŸ”´ P0 | TBD |
| F34 | Order ID Generation | Unique identifier for tracking | ðŸ”´ P0 | TBD |

#### Order Tracking
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F35 | View Order History | All orders in paginated list | ðŸ”´ P0 | TBD |
| F36 | Order Status Timeline | Visual timeline of status changes | ðŸŸ  P1 | TBD |
| F37 | Track Order in Real-Time | Live status updates (WebSocket future) | ðŸŸ¡ P2 | TBD |
| F38 | Delivery Proof Photo | View driver's delivery confirmation | ðŸŸ  P1 | TBD |
| F39 | Estimated Delivery Time | ETA based on order status | ðŸŸ  P1 | TBD |
| F40 | View Order Receipt | PDF download | ðŸŸ  P1 | TBD |
| F41 | Reorder from History | Quick reorder previous orders | ðŸŸ¡ P2 | TBD |
| F42 | Order Cancellation | Cancel if not yet prepared | ðŸŸ  P1 | TBD |
| F43 | Refund Status | Track refund progress | ðŸŸ  P1 | TBD |

#### Service Requests (Cleaning/IT)
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F44 | Create Service Request | Type (Cleaning/IT) + description | ðŸŸ  P1 | TBD |
| F45 | Upload Service Photos | Before photos (GCS) | ðŸŸ  P1 | TBD |
| F46 | Schedule Service Date | Pick date/time slot | ðŸŸ  P1 | TBD |
| F47 | Set Priority Level | LOW, MEDIUM, HIGH, URGENT | ðŸŸ  P1 | TBD |
| F48 | View Service Queue Status | Where am I in queue? | ðŸŸ  P1 | TBD |
| F49 | Track Service Progress | Real-time status updates | ðŸŸ  P1 | TBD |
| F50 | View Service Completion | After/completion photos | ðŸŸ  P1 | TBD |
| F51 | Rate Service Staff | 1-5 star rating + review | ðŸŸ¡ P2 | TBD |
| F52 | Cancel Service Request | Before assignment deadline | ðŸŸ  P1 | TBD |
| F53 | Service Request History | All past requests | ðŸŸ  P1 | TBD |

---

### 1.2 ADMIN

#### User Management
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F54 | View User Queue | Pending approvals | ðŸ”´ P0 | TBD |
| F55 | Approve User | Grant access to platform | ðŸ”´ P0 | TBD |
| F56 | Reject User | Decline with reason | ðŸŸ  P1 | TBD |
| F57 | View All Users | Paginated list with filters | ðŸ”´ P0 | TBD |
| F58 | Search Users | By email, name, phone | ðŸŸ  P1 | TBD |
| F59 | Change User Role | Assign SALESMAN, DRIVER, etc. | ðŸ”´ P0 | TBD |
| F60 | Suspend User | Disable account temporarily | ðŸŸ  P1 | TBD |
| F61 | Reactivate User | Re-enable suspended account | ðŸŸ  P1 | TBD |
| F62 | Delete User | Permanent deletion (GDPR) | ðŸŸ  P1 | TBD |
| F63 | User Details View | Profile, role, status, activity | ðŸŸ  P1 | TBD |

#### Product Catalog Management
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F64 | Create Category | Add new food category | ðŸ”´ P0 | TBD |
| F65 | Edit Category | Update name/description | ðŸŸ  P1 | TBD |
| F66 | Delete Category | Remove category | ðŸŸ  P1 | TBD |
| F67 | Category Image Upload | Upload to GCS | ðŸŸ  P1 | TBD |
| F68 | Create Food Item | Add to catalog | ðŸ”´ P0 | TBD |
| F69 | Edit Food Item | Update price, description, stock | ðŸ”´ P0 | TBD |
| F70 | Upload Item Photo | Food image to GCS | ðŸ”´ P0 | TBD |
| F71 | Delete Food Item | Remove from catalog | ðŸŸ  P1 | TBD |
| F72 | Bulk Upload Items | CSV import | ðŸŸ  P1 | TBD |
| F73 | Stock Management | Set/update stock levels | ðŸŸ  P1 | TBD |
| F74 | Low Stock Alert | Notify when stock < threshold | ðŸŸ¡ P2 | TBD |
| F75 | SKU Management | Unique product codes | ðŸŸ  P1 | TBD |

#### Order Management
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F76 | View All Orders | Paginated list with filters | ðŸ”´ P0 | TBD |
| F77 | Filter Orders by Status | PENDING, ACCEPTED, etc. | ðŸ”´ P0 | TBD |
| F78 | Filter Orders by Date | Date range filter | ðŸŸ  P1 | TBD |
| F79 | View Order Details | Full order info + items | ðŸ”´ P0 | TBD |
| F80 | Assign Salesman | Assign to staff | ðŸ”´ P0 | TBD |
| F81 | Assign Driver | Assign delivery staff | ðŸ”´ P0 | TBD |
| F82 | Manually Update Order Status | Force status change (emergency) | ðŸŸ  P1 | TBD |
| F83 | Cancel Order | Cancel with reason | ðŸ”´ P0 | TBD |
| F84 | Process Refund | Initiate refund for canceled order | ðŸŸ  P1 | TBD |
| F85 | View Order Audit Trail | All status changes with timestamps | ðŸŸ  P1 | TBD |

#### Service Request Management
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F86 | View Service Queue | All pending service requests | ðŸ”´ P0 | TBD |
| F87 | Filter by Service Type | CLEANING, IT_SUPPORT | ðŸ”´ P0 | TBD |
| F88 | Filter by Priority | URGENT â†’ LOW | ðŸŸ  P1 | TBD |
| F89 | View Service Details | Customer, description, photos | ðŸ”´ P0 | TBD |
| F90 | Assign Service to Staff | Pick staff from available list | ðŸ”´ P0 | TBD |
| F91 | View Available Staff | Staff by department + workload | ðŸŸ  P1 | TBD |
| F92 | Reassign Service | Move to different staff | ðŸŸ  P1 | TBD |
| F93 | Cancel Service | Cancel with reason + refund | ðŸŸ  P1 | TBD |

#### Analytics & Reporting
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F94 | Revenue Dashboard | Total sales, GMV, daily/weekly/monthly | ðŸŸ  P1 | TBD |
| F95 | Order Volume Chart | Orders per day/week/month | ðŸŸ  P1 | TBD |
| F96 | Top Products | Best-selling items | ðŸŸ  P1 | TBD |
| F97 | Top Categories | Most ordered food categories | ðŸŸ¡ P2 | TBD |
| F98 | Staff Performance | Orders completed by staff | ðŸŸ¡ P2 | TBD |
| F99 | Customer Metrics | Active users, repeat customers | ðŸŸ¡ P2 | TBD |
| F100 | Export Reports | CSV/PDF export of analytics | ðŸŸ¡ P2 | TBD |

#### Audit & Compliance
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F101 | View Audit Log | All system actions logged | ðŸŸ  P1 | TBD |
| F102 | Filter Audit Log | By actor, entity, date, action | ðŸŸ  P1 | TBD |
| F103 | Search Audit Log | Find specific changes | ðŸŸ  P1 | TBD |
| F104 | Download Audit Trail | For compliance/legal | ðŸŸ  P1 | TBD |
| F105 | Email Log Viewer | Track all sent emails | ðŸŸ¡ P2 | TBD |
| F106 | Error Log Viewer | System errors from Sentry | ðŸŸ¡ P2 | TBD |

#### System Configuration
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F107 | Email Template Management | Edit notification templates | ðŸŸ  P1 | TBD |
| F108 | Email Settings | Configure SendGrid/SMTP | ðŸŸ  P1 | TBD |
| F109 | System Alerts | Configure alert thresholds | ðŸŸ¡ P2 | TBD |
| F110 | Backup Management | Manual/automatic backups | ðŸŸ  P1 | TBD |

---

### 1.3 SALESMAN

#### Order Queue
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F111 | View Assigned Orders | My orders queue | ðŸ”´ P0 | TBD |
| F112 | Filter by Status | Only PENDING, ACCEPTED, PREPARING | ðŸ”´ P0 | TBD |
| F113 | Sort by Date | Oldest first (FIFO) | ðŸŸ  P1 | TBD |
| F114 | View Customer Details | Phone, address, order notes | ðŸ”´ P0 | TBD |
| F115 | View Items in Order | What to prepare | ðŸ”´ P0 | TBD |

#### Order Processing
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F116 | Accept Order | PENDING â†’ ACCEPTED | ðŸ”´ P0 | TBD |
| F117 | Mark as Preparing | ACCEPTED â†’ PREPARING | ðŸ”´ P0 | TBD |
| F118 | Upload Item Photos | Proof of preparation (GCS) | ðŸŸ  P1 | TBD |
| F119 | Decline Order | Reject with reason | ðŸŸ  P1 | TBD |
| F120 | Add Preparation Notes | Special instructions noted | ðŸŸ  P1 | TBD |
| F121 | Contact Customer | Click-to-call/SMS | ðŸŸ¡ P2 | TBD |

#### Dashboard
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F122 | Daily Stats | Orders accepted, completed, pending | ðŸŸ  P1 | TBD |
| F123 | Performance Metrics | Rating, speed, completion rate | ðŸŸ¡ P2 | TBD |

---

### 1.4 DRIVER

#### Delivery Queue
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F124 | View Delivery Queue | PREPARING & OUT_FOR_DELIVERY orders | ðŸ”´ P0 | TBD |
| F125 | View Delivery Details | Customer, address, phone, items | ðŸ”´ P0 | TBD |
| F126 | Sort by Location | Nearest orders first (future: GPS) | ðŸŸ¡ P2 | TBD |
| F127 | View Delivery Address | Map preview (Google Maps link) | ðŸŸ  P1 | TBD |

#### Delivery Confirmation
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F128 | Accept Delivery | PREPARING â†’ OUT_FOR_DELIVERY | ðŸ”´ P0 | TBD |
| F129 | Start Navigation | Google Maps link to address | ðŸŸ  P1 | TBD |
| F130 | Confirm Delivery | Mark as DELIVERED | ðŸ”´ P0 | TBD |
| F131 | Upload Delivery Photo | Proof of delivery (GCS) | ðŸ”´ P0 | TBD |
| F132 | Get Customer Signature | Digital signature (optional) | ðŸŸ¡ P2 | TBD |
| F133 | Add Delivery Notes | Special delivery instructions | ðŸŸ  P1 | TBD |
| F134 | Decline Delivery | Reject with reason | ðŸŸ  P1 | TBD |
| F135 | Contact Customer | Click-to-call | ðŸŸ  P1 | TBD |

#### Dashboard
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F136 | Deliveries Completed Today | Count + total distance | ðŸŸ  P1 | TBD |
| F137 | Pending Deliveries | How many left today | ðŸ”´ P0 | TBD |
| F138 | Performance Rating | Customer ratings | ðŸŸ¡ P2 | TBD |

---

### 1.5 CLEANER (Service Staff)

#### Service Assignment Queue
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F139 | View Assigned Services | My service jobs | ðŸ”´ P0 | TBD |
| F140 | View Service Details | Customer, description, date/time, photos | ðŸ”´ P0 | TBD |
| F141 | View Customer Info | Phone, address, special requests | ðŸ”´ P0 | TBD |
| F142 | Sort by Scheduled Date | Date order | ðŸŸ  P1 | TBD |

#### Service Management
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F143 | Accept Assignment | PENDING â†’ ACCEPTED | ðŸ”´ P0 | TBD |
| F144 | Decline Assignment | Reject with reason | ðŸŸ  P1 | TBD |
| F145 | Mark In Progress | ACCEPTED â†’ IN_PROGRESS | ðŸ”´ P0 | TBD |
| F146 | Upload Progress Photos | During cleaning (GCS) | ðŸŸ  P1 | TBD |
| F147 | Update Progress Notes | Work in progress text | ðŸŸ  P1 | TBD |
| F148 | Complete Service | IN_PROGRESS â†’ RESOLVED | ðŸ”´ P0 | TBD |
| F149 | Upload After Photos | After service completion (GCS) | ðŸ”´ P0 | TBD |
| F150 | Add Completion Notes | Summary of work done | ðŸŸ  P1 | TBD |
| F151 | Contact Customer | Click-to-call | ðŸŸ  P1 | TBD |

#### Dashboard
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F152 | Services Completed | Count + ratings | ðŸŸ  P1 | TBD |
| F153 | Pending Services | Today's schedule | ðŸ”´ P0 | TBD |
| F154 | Performance Rating | Customer ratings | ðŸŸ¡ P2 | TBD |
| F155 | Schedule View | Calendar of assignments | ðŸŸ  P1 | TBD |

---

### 1.6 IT STAFF (Service Staff)

#### IT Service Queue
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F156 | View IT Services | My IT support jobs | ðŸ”´ P0 | TBD |
| F157 | View Issue Details | Customer description + request type | ðŸ”´ P0 | TBD |
| F158 | View Service History | Customer's past IT requests | ðŸŸ  P1 | TBD |

#### IT Issue Resolution
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F159 | Accept IT Service | PENDING â†’ ACCEPTED | ðŸ”´ P0 | TBD |
| F160 | Decline IT Service | Reject with reason | ðŸŸ  P1 | TBD |
| F161 | Start Work | ACCEPTED â†’ IN_PROGRESS | ðŸ”´ P0 | TBD |
| F162 | Update Work Progress | Notes on diagnosis/repair | ðŸŸ  P1 | TBD |
| F163 | Upload Diagnostic Photos | Before/during photos (GCS) | ðŸŸ  P1 | TBD |
| F164 | Complete IT Service | IN_PROGRESS â†’ RESOLVED | ðŸ”´ P0 | TBD |
| F165 | Document Solution | Steps taken, software installed | ðŸŸ  P1 | TBD |
| F166 | Upload After Photos | System after fix (GCS) | ðŸŸ  P1 | TBD |
| F167 | Provide Support Notes | For customer's reference | ðŸŸ  P1 | TBD |
| F168 | Contact Customer | Click-to-call/chat | ðŸŸ  P1 | TBD |

#### Dashboard
| # | Feature | Description | Priority | Status |
|---|---------|-------------|----------|--------|
| F169 | IT Services Completed | Count + ratings | ðŸŸ  P1 | TBD |
| F170 | Pending Services | Today's queue | ðŸ”´ P0 | TBD |
| F171 | Performance Metrics | Rating + completion time | ðŸŸ¡ P2 | TBD |

---

## PART 2: USER STORIES (Complete Coverage)

### EPIC 1: USER AUTHENTICATION & ACCOUNT MANAGEMENT

#### US1.1: User Registration
```
As a new customer
I want to create an account with email and password
So that I can place orders and track service requests

Acceptance Criteria:
âœ“ Form asks for: email, password, name, phone
âœ“ Password minimum 8 characters, must include uppercase + number
âœ“ Email must be valid format (regex validation)
âœ“ Email verification link sent to inbox
âœ“ Account created but DISABLED until admin approves
âœ“ Confirmation message shows "Waiting for admin approval"
âœ“ Error messages clear if email already exists
âœ“ Password stored as bcrypt hash (10 rounds)
âœ“ Terms & Conditions checkbox required
âœ“ Spam protection: reCAPTCHA v3 (optional)

Test Cases:
- Valid registration â†’ Email sent â†’ User waits for approval
- Duplicate email â†’ Error message
- Weak password â†’ Error explaining requirements
- Invalid email â†’ Error message
- Missing fields â†’ Error on each required field
```

#### US1.2: Email Verification
```
As a new customer
I want to verify my email address
So that I confirm ownership and activate account

Acceptance Criteria:
âœ“ Verification link valid for 24 hours
âœ“ Link format: /verify-email?token=xxx
âœ“ Token stored in database with expiry
âœ“ One-time use: token deleted after verification
âœ“ Success page shows "Email verified. Waiting for admin approval"
âœ“ Resend link button if token expired
âœ“ Expired link error message + resend option
âœ“ Rate limit: max 5 resend attempts per hour

Test Cases:
- Click verification link â†’ Verified
- Expired token â†’ Resend option
- Already verified â†’ Redirect to login
- Invalid token â†’ Error
```

#### US1.3: Admin User Approval
```
As an admin
I want to approve new user registrations
So that I control who can access the platform

Acceptance Criteria:
âœ“ Approval queue shows pending users (verified email but not approved)
âœ“ Show: email, name, date registered, phone
âœ“ Click "Approve" â†’ isApproved = true, user can login
âœ“ Click "Reject" â†’ Show rejection reason form â†’ Send email
âœ“ Approved user gets email: "Your account has been approved"
âœ“ Rejected user gets email: "Your account was rejected: [reason]"
âœ“ Pagination: 10 users per page
âœ“ Audit log: Admin name, action, timestamp
âœ“ Bulk approve button (select multiple)

Test Cases:
- Approve user â†’ Can now login
- Reject user â†’ Cannot login, receives rejection email
- Email notified on both actions
- Audit trail records action
```

#### US1.4: User Login
```
As a registered customer
I want to login with email and password
So that I access my account and orders

Acceptance Criteria:
âœ“ Login form: email + password
âœ“ NextAuth credentials provider used
âœ“ Password compared to bcrypt hash
âœ“ Check: isApproved = true (blocked if false)
âœ“ Check: isSuspended = false (blocked if true)
âœ“ Successful login â†’ JWT created, stored in httpOnly cookie
âœ“ JWT valid for 30 days
âœ“ "Remember me" checkbox (optional)
âœ“ Error messages don't reveal if user exists
âœ“ Rate limit: 5 failed attempts â†’ 15 min lockout
âœ“ Redirect to dashboard after login

Test Cases:
- Valid credentials â†’ Login succeeds
- Not approved â†’ Error "Waiting for admin approval"
- Suspended â†’ Error "Account suspended"
- Wrong password â†’ Error "Invalid credentials"
- Too many attempts â†’ Lockout
```

#### US1.5: Password Reset
```
As a customer
I want to reset my forgotten password
So that I can regain account access

Acceptance Criteria:
âœ“ "Forgot password?" link on login page
âœ“ Enter email â†’ Check if exists
âœ“ If exists, send reset link (don't reveal if email exists)
âœ“ Reset token valid for 1 hour
âœ“ Reset link: /reset-password?token=xxx
âœ“ New password form (same validation as registration)
âœ“ Confirm new password field
âœ“ Success: Password changed + redirect to login
âœ“ Email notification: "Your password was reset"
âœ“ Rate limit: 3 reset requests per hour

Test Cases:
- Forgot password â†’ Email sent â†’ Reset succeeds
- Token expired â†’ Error + resend option
- Invalid token â†’ Error
- Passwords don't match â†’ Error
```

#### US1.6: User Profile Management
```
As a customer
I want to view and edit my profile
So that I keep my information current

Acceptance Criteria:
âœ“ Profile page shows: email (read-only), name, phone, address, city, postal code
âœ“ Edit each field individually
âœ“ Name min 3 characters
âœ“ Phone number format validation
âœ“ Address validation (check service area)
âœ“ Upload profile picture â†’ saved to GCS
âœ“ Success message: "Profile updated"
âœ“ Audit log: what changed + when
âœ“ Option to download personal data (GDPR)
âœ“ Option to delete account (with confirmation)

Test Cases:
- Update profile â†’ Changes saved
- Invalid phone â†’ Error
- Upload picture â†’ Shows in profile
- Delete account â†’ Data anonymized in DB
```

---

### EPIC 2: FOOD SHOPPING & ORDERING

#### US2.1: Browse Food Catalog
```
As a customer
I want to browse all available food items
So that I can see what to order

Acceptance Criteria:
âœ“ Shop page displays all food items in grid (4 columns mobile, 6 desktop)
âœ“ Each item card shows: image (GCS), name, price, in-stock indicator
âœ“ Images load from GCS CDN (fast, optimized)
âœ“ Grid responsive on mobile (2 columns)
âœ“ Pagination: 20 items per page
âœ“ "Show more" button to load next page
âœ“ Click item â†’ Opens detail page
âœ“ Loading state with skeleton loaders
âœ“ No items message if empty

Test Cases:
- Page loads â†’ All items visible
- Mobile view â†’ 2 column responsive
- Click item â†’ Detail page opens
- Out of stock â†’ "Sold Out" badge shown
```

#### US2.2: Filter by Category
```
As a customer
I want to filter items by food category
So that I find what I want quickly

Acceptance Criteria:
âœ“ Category sidebar with all categories
âœ“ Show count of items per category
âœ“ Click category â†’ Filters items
âœ“ Multiple selection (AND logic): e.g., Beef + Spices
âœ“ URL updates with query params: ?categories=beef,spices
âœ“ "Clear filters" button
âœ“ Active filters shown as chips/tags
âœ“ Mobile: Category dropdown instead of sidebar
âœ“ Pagination resets when filter changes

Test Cases:
- Click category â†’ Items filtered
- Multi-select â†’ Shows items matching all
- Clear filter â†’ All items shown
- URL shareable with filters
```

#### US2.3: Filter by Price Range
```
As a customer
I want to filter items by price
So that I find items within my budget

Acceptance Criteria:
âœ“ Price range slider: min - max (e.g., LKR 0-10000)
âœ“ Shows current selection: "LKR 500 - LKR 5000"
âœ“ Drag slider to adjust range
âœ“ Items updated in real-time
âœ“ URL updated: ?minPrice=500&maxPrice=5000
âœ“ Combined with category filter
âœ“ Mobile: Input fields instead of slider (min/max)
âœ“ Reset button

Test Cases:
- Drag slider â†’ Items filtered by price
- Type in input â†’ Items filtered
- Multi-filter (category + price) â†’ Both applied
```

#### US2.4: Search Food Items
```
As a customer
I want to search for food items by name or description
So that I find specific products quickly

Acceptance Criteria:
âœ“ Search bar at top of shop page
âœ“ Type to search: real-time results
âœ“ Searches in: item name + description
âœ“ Shows results count: "23 results for 'beef'"
âœ“ Highlights matching text in results
âœ“ Clear button (X) in search box
âœ“ Recent searches saved (localStorage, max 5)
âœ“ Mobile: Full-width search bar
âœ“ Debounce: wait 300ms before searching
âœ“ No results message with suggestion

Test Cases:
- Search "beef" â†’ Beef items shown
- Search "special" â†’ Description matches shown
- No results â†’ Helpful message
- Click recent search â†’ Results shown
```

#### US2.5: View Item Details
```
As a customer
I want to view full details of a food item
So that I decide if I want to order it

Acceptance Criteria:
âœ“ Detail page shows: large image (GCS), name, price, stock status, description
âœ“ Image gallery (multiple photos if available)
âœ“ Nutritional info section (if available)
âœ“ Ingredients list
âœ“ Quantity selector (1-100)
âœ“ "Add to Cart" button
âœ“ "Share this item" button (copy link)
âœ“ Related items (same category)
âœ“ Breadcrumb: Home > Category > Item Name
âœ“ Mobile: Image fills width, sticky "Add to Cart" button

Test Cases:
- Load detail page â†’ All info shown
- Out of stock â†’ Button disabled
- Change quantity â†’ Updates before add
- Add to cart â†’ Redirects to cart
```

#### US2.6: Add Item to Cart
```
As a customer
I want to add items to my shopping cart
So that I can purchase multiple items

Acceptance Criteria:
âœ“ Click "Add to Cart" button â†’ Item added
âœ“ Toast notification: "Added 2x Beef to cart"
âœ“ Quantity selector allows 1-100
âœ“ Cart count updates in header
âœ“ Add from different pages (detail, grid, search)
âœ“ Multiple quantities of same item (combines)
âœ“ Cart stored in Redux + localStorage
âœ“ Notification shows option to view cart
âœ“ Button text changes to "Added" temporarily
âœ“ Can continue shopping

Test Cases:
- Add item â†’ Cart count increases
- Add same item twice â†’ Quantity increases
- Out of stock â†’ Cannot add
- Add multiple items â†’ All in cart
```

#### US2.7: View Shopping Cart
```
As a customer
I want to view my shopping cart
So that I review my order before checkout

Acceptance Criteria:
âœ“ Cart page shows all items with:
  - Item image (GCS), name, price per unit
  - Quantity selector (change anytime)
  - Subtotal per item (qty Ã— price)
  - Remove button per item
âœ“ Cart summary shows:
  - Subtotal (sum of items)
  - Tax (if applicable)
  - Delivery fee (estimated)
  - Total price
âœ“ "Continue Shopping" button
âœ“ "Proceed to Checkout" button
âœ“ Empty cart shows helpful message
âœ“ Mobile: Vertical layout, sticky summary
âœ“ Real-time price updates if prices changed

Test Cases:
- Add item â†’ Shows in cart
- Change quantity â†’ Total updates
- Remove item â†’ Cart updates
- Empty cart â†’ Message shown
- Stock depleted â†’ Warning shown
```

#### US2.8: Proceed to Checkout
```
As a customer
I want to checkout and place an order
So that I can receive my food delivery

Acceptance Criteria:
âœ“ Checkout page requires: delivery address, phone, email (pre-filled)
âœ“ Address form:
  - Street address (required)
  - City (dropdown: predefined cities)
  - Postal code (required)
  - Save as default (checkbox)
âœ“ Select from saved addresses (if exists)
âœ“ Address validation (check if in service area)
âœ“ Optional: Upload order photo/notes (GCS)
âœ“ Order review section (readonly)
âœ“ Terms checkbox: "I agree to terms"
âœ“ "Place Order" button
âœ“ Confirmation modal before final submit

Test Cases:
- Enter address â†’ Validated
- Select saved address â†’ Pre-fills
- Upload photo â†’ Shows preview
- Submit â†’ Order created
```

#### US2.9: Create Order
```
As the system
I want to create and save an order
So that the order is recorded and staff are notified

Acceptance Criteria:
âœ“ POST /api/orders with:
  - cart items (foodItemId, quantity)
  - deliveryAddress
  - proofImageUrl (if uploaded)
  - notes
âœ“ Validate: stock available, address valid
âœ“ Create Order record with status=PENDING
âœ“ Create OrderItem records (one per cart item)
âœ“ Calculate totalPrice (sum item prices Ã— qty)
âœ“ Log to AuditLog (actor=customer, action=CREATE)
âœ“ Send confirmation email (Nodemailer)
âœ“ Generate unique order ID
âœ“ Clear cart (localStorage + Redux)
âœ“ Redirect to order tracking page
âœ“ Return: order ID, confirmation number

Test Cases:
- Valid order â†’ Created successfully
- Out of stock â†’ Error + rollback
- Invalid address â†’ Error message
- Email sent â†’ Delivered
- Order tracked â†’ Can view status
```

#### US2.10: Order Confirmation Email
```
As a customer
I want to receive an order confirmation email
So that I have proof of purchase and can track my order

Acceptance Criteria:
âœ“ Email sent immediately after order creation
âœ“ Subject: "Order #12345 Confirmed - Your food will arrive soon"
âœ“ Email includes:
  - Order ID
  - Order date/time
  - Items list (name, qty, price)
  - Delivery address
  - Total price
  - Estimated delivery time
  - Track order link
  - Customer support phone
âœ“ HTML formatted (not plain text)
âœ“ Mobile responsive
âœ“ Retry if failed (max 3 attempts)
âœ“ Error logged if delivery fails

Test Cases:
- Order created â†’ Email arrives <5 min
- Email valid HTML â†’ Renders in Gmail, Outlook
- All info accurate â†’ Matches order
```

---

### EPIC 3: ORDER TRACKING & MANAGEMENT

#### US3.1: View Order History
```
As a customer
I want to see all my past and current orders
So that I can track and manage them

Acceptance Criteria:
âœ“ Dashboard > Orders page
âœ“ List of orders with: Order #, date, status, total, action
âœ“ Orders sorted by date (newest first)
âœ“ Pagination: 10 orders per page
âœ“ Filter by status: ALL, PENDING, ACCEPTED, PREPARING, OUT_FOR_DELIVERY, DELIVERED
âœ“ Search by order ID
âœ“ Search by date range
âœ“ Each row clickable â†’ Order detail page
âœ“ Mobile: Card layout instead of table
âœ“ Empty state: "No orders yet"

Test Cases:
- Load orders page â†’ All orders shown
- Click filter â†’ Only filtered orders shown
- Click order â†’ Detail page
- Search order ID â†’ Found
```

#### US3.2: View Order Status & Timeline
```
As a customer
I want to see detailed order status with timeline
So that I know where my order is

Acceptance Criteria:
âœ“ Order detail page shows:
  - Order #, date, total
  - Items ordered (with quantity, price)
  - Delivery address
âœ“ Status timeline:
  - âœ“ PENDING (when created)
  - âœ“ ACCEPTED (when salesman accepts)
  - âœ“ PREPARING (when being prepared)
  - âœ“ OUT_FOR_DELIVERY (when driver takes it)
  - âœ“ DELIVERED (when arrived)
âœ“ Each status shows: date/time, who did it
âœ“ Current status highlighted
âœ“ "What happens next?" helper text
âœ“ Estimated delivery time calculation
âœ“ Live updates (WebSocket future)
âœ“ Mobile: Vertical timeline view

Test Cases:
- View new order â†’ Shows PENDING
- Salesman accepts â†’ Shows ACCEPTED with timestamp
- View timeline â†’ All transitions shown
```

#### US3.3: View Delivery Proof
```
As a customer
I want to see the driver's delivery photo
So that I have proof of delivery

Acceptance Criteria:
âœ“ On DELIVERED status:
  - Show "Delivery Photo" section
  - Display photo from GCS
  - Show delivery time
  - Show driver name
âœ“ Click photo â†’ Full size view
âœ“ Download button (optional)
âœ“ Photo must be clear and show package
âœ“ Photo uploaded to GCS, URL stored in Order.proofImageUrl

Test Cases:
- Order delivered â†’ Photo visible
- Photo loads from GCS â†’ Fast
- Click to enlarge â†’ Full view works
```

#### US3.4: Cancel Order
```
As a customer
I want to cancel my order if it's not yet preparing
So that I can get a refund

Acceptance Criteria:
âœ“ Cancel button available if status â‰¤ ACCEPTED
âœ“ Click cancel â†’ Confirmation dialog
âœ“ Reason dropdown: "Changed mind", "Out of stock", "Address issue", etc.
âœ“ Submit â†’ Order status = CANCELED
âœ“ Refund initiated (future: Stripe integration)
âœ“ Cancellation email sent to customer
âœ“ Admin notified
âœ“ Audit log: cancellation reason
âœ“ Cannot cancel if PREPARING or later

Test Cases:
- Order PENDING â†’ Can cancel
- Order ACCEPTED â†’ Can cancel
- Order PREPARING â†’ Cannot cancel
- Cancel â†’ Refund email sent
```

---

### EPIC 4: SERVICE REQUESTS (CLEANING/IT SUPPORT)

#### US4.1: Create Service Request
```
As a customer
I want to create a service request for cleaning or IT support
So that I can book services

Acceptance Criteria:
âœ“ Dashboard > Services > "Request Service"
âœ“ Select service type: Cleaning or IT Support
âœ“ Enter description (min 20 characters)
âœ“ Upload up to 3 "before" photos (GCS, max 5MB each)
âœ“ Choose preferred date/time slot
âœ“ Set priority: LOW, MEDIUM, HIGH, URGENT
âœ“ Optional: Special instructions text area
âœ“ Address pre-filled from profile (editable)
âœ“ Review page before submit
âœ“ "Request Service" button
âœ“ Confirmation email sent

Test Cases:
- Fill form â†’ Validation passes
- Upload photos â†’ Show previews
- Submit â†’ Service request created
- Email sent â†’ Received
```

#### US4.2: Track Service Progress
```
As a customer
I want to track my service request status
So that I know when service will arrive

Acceptance Criteria:
âœ“ Service request detail page shows:
  - Request #, date created
  - Service type (Cleaning/IT)
  - Description + photos
  - Current status (RECEIVED, ASSIGNED, IN_PROGRESS, RESOLVED)
âœ“ Status timeline:
  - RECEIVED (when created)
  - ASSIGNED (when staff assigned)
  - IN_PROGRESS (when staff starts work)
  - RESOLVED (when completed)
âœ“ Assigned staff info:
  - Staff name, photo, rating
  - Contact phone
  - Estimated arrival time
âœ“ Real-time updates as status changes
âœ“ Notification when staff arrives

Test Cases:
- Create request â†’ Shows RECEIVED
- Admin assigns staff â†’ Shows ASSIGNED + staff info
- Staff starts â†’ Shows IN_PROGRESS
- Staff completes â†’ Shows RESOLVED + after photos
```

#### US4.3: View Service Completion
```
As a customer
I want to see after-photos and completion details
So that I confirm the service was done well

Acceptance Criteria:
âœ“ On RESOLVED status:
  - Show "After Photos" section (2-3 photos from GCS)
  - Show completion notes from staff
  - Show completion date/time
  - Show staff name
âœ“ Click photos â†’ Full size gallery
âœ“ Staff professionalism notes
âœ“ "Rate Service" button (opens rating form)

Test Cases:
- Service completed â†’ After photos visible
- Photos load from GCS
- See completion notes
```

#### US4.4: Rate Service Staff
```
As a customer
I want to rate the service I received
So that I provide feedback and help others choose

Acceptance Criteria:
âœ“ Rating form with:
  - 1-5 star rating
  - Optional text review (max 500 characters)
  - "Would recommend" checkbox
âœ“ Submit â†’ Rating saved to database
âœ“ Affects staff member's average rating
âœ“ Optional: Email thank you message
âœ“ Cannot rate same service twice
âœ“ Public reviews shown on staff profile (name, text, stars)

Test Cases:
- Give 5 star rating â†’ Saved
- Write review â†’ Shows on staff profile
- Staff rating updates â†’ Average includes new rating
```

---

### EPIC 5: ADMIN DASHBOARDS

#### US5.1: Admin User Approval Queue
```
As an admin
I want to approve new user registrations
So that I control platform access

Acceptance Criteria:
âœ“ Dashboard > Users > Approval Queue
âœ“ Show pending users (isApproved = false, verified email)
âœ“ Show: email, name, registration date, phone
âœ“ Approve button â†’ isApproved = true
âœ“ Reject button â†’ Opens reason form
âœ“ Send email on both actions
âœ“ Bulk select & approve (checkbox for all)
âœ“ Audit log: who approved/rejected, when
âœ“ Rejected users removed from queue
âœ“ Search by email/name

Test Cases:
- Approve user â†’ Can login
- Reject user â†’ Blocked from login
- Receive approval email â†’ Contains welcome message
```

#### US5.2: Manage Users
```
As an admin
I want to manage all user accounts
So that I control roles and access

Acceptance Criteria:
âœ“ Dashboard > Users > All Users
âœ“ Paginated list (50 users per page)
âœ“ Show: email, name, role, status (Active/Suspended), actions
âœ“ Change user role: dropdown (CUSTOMER, SALESMAN, DRIVER, CLEANER, IT_STAFF)
âœ“ Suspend user: button â†’ status = suspended
âœ“ Reactivate suspended: button â†’ status = active
âœ“ Delete user: confirmation â†’ anonymize data
âœ“ View user detail: profile, history, orders
âœ“ Filter by role
âœ“ Filter by status (Active/Suspended)
âœ“ Search by email/phone
âœ“ Audit all changes

Test Cases:
- Change role â†’ Staff member assigned to jobs
- Suspend user â†’ Cannot login
- Delete user â†’ Data anonymized
```

#### US5.3: Product Catalog Management
```
As an admin
I want to manage food items and categories
So that I control what customers see

Acceptance Criteria:
âœ“ Dashboard > Catalog > Categories
âœ“ List all categories with item count
âœ“ Add category: name, description, image (GCS)
âœ“ Edit category
âœ“ Delete category (only if no items)
âœ“ Dashboard > Catalog > Items
âœ“ Add item: name, category, price, stock, description, image (GCS), SKU
âœ“ Edit item: all fields editable
âœ“ Delete item
âœ“ Bulk import: CSV file (email, price, stock)
âœ“ Set stock levels
âœ“ Low stock alert (< 10): visual indicator

Test Cases:
- Create category â†’ Added to filter list
- Add item â†’ Shows in shop
- Edit price â†’ Updated for customers
- Upload image â†’ Shows in GCS
- Bulk import â†’ 100 items added from CSV
```

#### US5.4: Order Management Dashboard
```
As an admin
I want to manage all orders
So that I track fulfillment and resolve issues

Acceptance Criteria:
âœ“ Dashboard > Orders
âœ“ List all orders: #, customer, date, status, total
âœ“ Filter by status (PENDING, ACCEPTED, etc.)
âœ“ Filter by date range
âœ“ Search by order ID
âœ“ Click order â†’ Full detail page:
  - Items, customer address, notes, photos
  - Status history with timestamps
  - Assign salesman: dropdown of available salesmen
  - Assign driver: dropdown of available drivers
  - Manually change status (emergency)
  - Cancel order: reason form + refund
âœ“ Export orders: CSV
âœ“ Sort by date, status, total

Test Cases:
- Assign salesman â†’ Salesman sees in queue
- Change status â†’ Timestamps logged
- Cancel order â†’ Email sent to customer
```

#### US5.5: Service Request Management
```
As an admin
I want to manage all service requests
So that I assign staff and track completion

Acceptance Criteria:
âœ“ Dashboard > Services
âœ“ Queue of all requests: #, type, customer, date, status
âœ“ Filter by type (CLEANING, IT_SUPPORT)
âœ“ Filter by priority (URGENT, HIGH, MEDIUM, LOW)
âœ“ Filter by status (RECEIVED, ASSIGNED, IN_PROGRESS, RESOLVED)
âœ“ Sort by date, priority
âœ“ Click request â†’ Detail:
  - Customer, description, photos
  - Assign to staff: dropdown of available staff by type
  - View staff workload (current assignments)
  - Reassign if needed
  - Cancel: reason form + refund
âœ“ Notification when staff assigned

Test Cases:
- Assign cleaner â†’ Cleaner sees in queue
- Staff accepts â†’ Status â†’ ASSIGNED
- Cannot assign beyond staff capacity
```

#### US5.6: Admin Analytics Dashboard
```
As an admin
I want to see business analytics
So that I understand performance and trends

Acceptance Criteria:
âœ“ Dashboard > Analytics
âœ“ Cards showing:
  - Total orders today, this week, this month
  - Total revenue (today, week, month, year)
  - Average order value
  - Total active users
  - Staff performance ranking
âœ“ Charts:
  - Line chart: Revenue over time (7 days, 30 days, 1 year)
  - Bar chart: Orders per category (top 10)
  - Pie chart: Service types (% cleaning vs IT)
âœ“ Top products table: Name, orders, revenue
âœ“ Staff ranking: Name, orders completed, rating, revenue
âœ“ Export analytics: CSV, PDF

Test Cases:
- Load analytics â†’ Charts render
- Change date range â†’ Charts update
- Export CSV â†’ File downloads
```

#### US5.7: Audit Log Viewer
```
As an admin
I want to view all system actions
So that I maintain compliance and track changes

Acceptance Criteria:
âœ“ Dashboard > Audit Logs
âœ“ Table: Entity Type, Entity ID, Action, Actor, Date/Time, Details
âœ“ Filter by entity type (Order, Service, User)
âœ“ Filter by action (CREATE, UPDATE, DELETE, CANCEL)
âœ“ Filter by date range
âœ“ Search by actor (who did it)
âœ“ Search by entity ID (order/user/service)
âœ“ Click row â†’ Expanded view with full details
âœ“ Export: CSV (for legal/compliance)
âœ“ Immutable: cannot edit logs
âœ“ 2-year retention

Test Cases:
- View order creation â†’ LOG shows CREATE action
- Cancel order â†’ LOG shows CANCEL + reason
- Change user role â†’ LOG shows UPDATE + old/new values
- Export CSV â†’ Contains all info
```

---

### EPIC 6: SALESMAN DASHBOARD

#### US6.1: View Order Queue
```
As a salesman
I want to see orders assigned to me
So that I know what to prepare

Acceptance Criteria:
âœ“ Dashboard > My Orders
âœ“ Show assigned orders: #, customer name, date created, status
âœ“ Filter by status (only PENDING, ACCEPTED, PREPARING)
âœ“ Sort by date (oldest first = FIFO)
âœ“ Click order â†’ Expand details:
  - Items to prepare
  - Customer address + phone
  - Special notes/requests
  - Delivery address
âœ“ Real-time updates (new orders appear)
âœ“ Unread indicator for new orders

Test Cases:
- Admin assigns order â†’ Appears in queue
- Click order â†’ Details shown
- Multiple orders â†’ Sortable
```

#### US6.2: Accept Order
```
As a salesman
I want to accept an order from my queue
So that I start preparing it

Acceptance Criteria:
âœ“ Click "Accept" button on order
âœ“ Status changes: PENDING â†’ ACCEPTED
âœ“ Timestamp recorded
âœ“ Confirmation: "Order accepted. Start preparing"
âœ“ Button changes to "Mark as Preparing"
âœ“ Customer notified via email: "Your order is being prepared"
âœ“ Salesman name shown to customer
âœ“ Cannot accept if out of stock
âœ“ Cannot accept if not assigned

Test Cases:
- Accept order â†’ Status â†’ ACCEPTED
- Email sent â†’ Customer notified
- Customer sees salesman name
```

#### US6.3: Mark Order as Preparing
```
As a salesman
I want to mark an order as preparing
So that customer knows I'm working on it

Acceptance Criteria:
âœ“ Click "Mark as Preparing" button
âœ“ Status changes: ACCEPTED â†’ PREPARING
âœ“ Timestamp recorded
âœ“ Optional: Upload photo of items being prepared (GCS)
âœ“ Optional: Add preparation notes ("extra spicy", "no onion")
âœ“ Customer notified: "Your order is being prepared. Arrives in ~20 min"
âœ“ ETA calculation
âœ“ Button changes to "Ready for Pickup"

Test Cases:
- Mark preparing â†’ Status updated
- Upload photo â†’ Shows in customer's view
- Email sent â†’ ETA shown
```

#### US6.4: Decline Order
```
As a salesman
I want to decline an order if I can't fulfill it
So that it goes to another salesman

Acceptance Criteria:
âœ“ Click "Decline" button
âœ“ Reason dropdown: "Out of stock", "Not enough time", "Other"
âœ“ Optional: Additional notes
âœ“ Submit â†’ Order reassigned to next available salesman
âœ“ Admin notified of decline
âœ“ Email sent to customer if delay expected
âœ“ Audit log: decline reason

Test Cases:
- Decline order â†’ Goes to next salesman
- Admin sees decline reason
- Customer may be notified if delay
```

#### US6.5: Salesman Dashboard Stats
```
As a salesman
I want to see my daily performance
So that I understand my productivity

Acceptance Criteria:
âœ“ Dashboard > My Stats
âœ“ Show: Orders accepted today, Orders completed, Orders pending
âœ“ Rating: Average customer rating (out of 5)
âœ“ Speed: Average preparation time
âœ“ Completion rate: % of accepted orders completed
âœ“ Chart: Orders completed over last 7 days

Test Cases:
- Complete order â†’ Count increases
- Receive 5-star review â†’ Rating updates
```

---

### EPIC 7: DRIVER DASHBOARD

#### US7.1: View Delivery Queue
```
As a driver
I want to see deliveries assigned to me
So that I know what to deliver

Acceptance Criteria:
âœ“ Dashboard > Deliveries
âœ“ Show: Order #, customer, address, status, items count
âœ“ Filter by status (PREPARING, OUT_FOR_DELIVERY)
âœ“ Sort by location (nearest first - future GPS)
âœ“ Click delivery â†’ Details:
  - Customer name, phone, address
  - Items in order (just items count)
  - Special delivery notes
  - Map link (Google Maps)
âœ“ Real-time updates
âœ“ Unread indicator for new deliveries

Test Cases:
- Order marked PREPARING â†’ Appears in delivery queue
- Click delivery â†’ Address & map shown
```

#### US7.2: Accept Delivery
```
As a driver
I want to accept a delivery from my queue
So that I start delivering

Acceptance Criteria:
âœ“ Click "Accept Delivery" button
âœ“ Status changes: PREPARING â†’ OUT_FOR_DELIVERY
âœ“ Timestamp recorded: when driver accepted
âœ“ "On my way" status shown to customer
âœ“ Customer notified: "Driver is on the way. Arrives in ~15 min"
âœ“ Button changes to "Confirm Delivery"
âœ“ Navigation link (Google Maps) appears
âœ“ Cannot accept if suspended/inactive

Test Cases:
- Accept delivery â†’ Status â†’ OUT_FOR_DELIVERY
- Email sent â†’ ETA shown
- Maps link available
```

#### US7.3: Confirm Delivery
```
As a driver
I want to confirm delivery with photo proof
So that customer has proof of delivery

Acceptance Criteria:
âœ“ Click "Confirm Delivery" button
âœ“ Camera/upload photo dialog
âœ“ Upload delivery photo (max 5MB, GCS)
âœ“ Photo must show package at customer address
âœ“ Optional: Add delivery notes ("left at gate", "handed to customer", etc.)
âœ“ Status changes: OUT_FOR_DELIVERY â†’ DELIVERED
âœ“ Timestamp recorded
âœ“ Photo stored in Order.proofImageUrl (GCS URL)
âœ“ Customer receives: "Order delivered! See proof photo"
âœ“ Driver receives: "Delivery confirmed. Rating will show soon"

Test Cases:
- Upload photo â†’ Shows to customer
- Confirm â†’ Order â†’ DELIVERED
- Photo in customer's order details
- Email sent with proof
```

#### US7.4: Driver Dashboard Stats
```
As a driver
I want to see my daily deliveries
So that I track completion

Acceptance Criteria:
âœ“ Dashboard > My Stats
âœ“ Show: Deliveries today, Completed, Pending
âœ“ Rating: Average customer rating
âœ“ Speed: Average delivery time
âœ“ Distance: Total km driven today (future GPS)
âœ“ Chart: Deliveries completed last 7 days

Test Cases:
- Complete delivery â†’ Count increases
- Get 5-star rating â†’ Shows in profile
```

---

### EPIC 8: CLEANER DASHBOARD

#### US8.1: View Service Queue
```
As a cleaner
I want to see cleaning jobs assigned to me
So that I know what services to provide

Acceptance Criteria:
âœ“ Dashboard > My Services
âœ“ Show: Service #, customer, service type, date, status
âœ“ Filter by status (ASSIGNED, IN_PROGRESS)
âœ“ Filter by date
âœ“ Sort by scheduled date
âœ“ Click service â†’ Details:
  - Customer name, phone, address
  - Description of what needs cleaning
  - Before photos (GCS)
  - Scheduled date/time
  - Special notes
âœ“ Real-time updates
âœ“ Upcoming services highlighted

Test Cases:
- Assigned service â†’ Appears in queue
- Click service â†’ Customer & details shown
```

#### US8.2: Accept Service Assignment
```
As a cleaner
I want to accept a cleaning assignment
So that I confirm I'll do the job

Acceptance Criteria:
âœ“ Click "Accept" button
âœ“ Status changes: ASSIGNED â†’ IN_PROGRESS (pending, but confirmed)
âœ“ Confirmation: "Service accepted. You will arrive at [time]"
âœ“ Customer notified: "Cleaner accepted your request"
âœ“ Cleaner name/photo shown to customer
âœ“ Cannot accept if at capacity

Test Cases:
- Accept assignment â†’ Status updated
- Email sent to customer
- Customer sees cleaner details
```

#### US8.3: Update Service Progress
```
As a cleaner
I want to update progress on an active cleaning job
So that customer knows I'm working

Acceptance Criteria:
âœ“ Click "In Progress" on active service
âœ“ Status: ASSIGNED â†’ IN_PROGRESS
âœ“ Upload progress photos (during cleaning, GCS)
âœ“ Add progress notes: "Cleaned bedrooms. Working on kitchen."
âœ“ Updates timestamp
âœ“ Customer notified: "Cleaning in progress. [Progress text]"

Test Cases:
- Upload photos â†’ Customer sees them
- Add notes â†’ Customer sees progress
```

#### US8.4: Complete Service
```
As a cleaner
I want to mark a service as complete
So that customer knows it's done

Acceptance Criteria:
âœ“ Click "Complete Service" button
âœ“ Upload after-photos (2-3 photos, GCS)
âœ“ Required: Completion notes: "Cleaned all areas as requested"
âœ“ Status changes: IN_PROGRESS â†’ RESOLVED
âœ“ Timestamp recorded
âœ“ Customer notified: "Your cleaning is complete! View photos"
âœ“ Customer can rate cleaner
âœ“ Email sent with after-photos + notes
âœ“ Service marked as billable

Test Cases:
- Upload after photos â†’ Customer sees them
- Completion â†’ Email with all details
- Customer rates â†’ Shows in cleaner profile
```

#### US8.5: Cleaner Dashboard Stats
```
As a cleaner
I want to see my performance metrics
So that I understand my productivity

Acceptance Criteria:
âœ“ Dashboard > My Stats
âœ“ Show: Services completed today, Pending, Total completed this month
âœ“ Rating: Average customer rating
âœ“ Completion rate: % of assigned services completed
âœ“ Chart: Services completed last 7 days
âœ“ Top categories: Most common cleaning types

Test Cases:
- Complete service â†’ Stats update
- Get rating â†’ Shows in profile
```

---

### EPIC 9: IT STAFF DASHBOARD

#### US9.1: View IT Service Queue
```
As IT staff
I want to see IT support requests assigned to me
So that I know what issues to fix

Acceptance Criteria:
âœ“ Dashboard > My IT Services
âœ“ Show: Service #, customer, issue type, date, status
âœ“ Filter by status (ASSIGNED, IN_PROGRESS)
âœ“ Filter by priority
âœ“ Sort by scheduled date
âœ“ Click service â†’ Details:
  - Customer name, phone, address
  - Issue description (PC won't start, internet down, etc.)
  - Screenshot/diagnostic photos (GCS)
  - Hardware specs (if mentioned)
  - Previous IT history (if exists)
âœ“ Real-time updates

Test Cases:
- Assigned IT service â†’ Appears
- Click service â†’ Full details shown
```

#### US9.2: Accept IT Service
```
As IT staff
I want to accept an IT support request
So that I confirm I'll do the work

Acceptance Criteria:
âœ“ Click "Accept" button
âœ“ Status: ASSIGNED â†’ IN_PROGRESS (pending confirmation)
âœ“ Customer notified: "IT technician accepted your request"
âœ“ Technician name shown to customer
âœ“ Estimated arrival time shown

Test Cases:
- Accept â†’ Customer notified
- Email with technician details
```

#### US9.3: Troubleshoot & Document
```
As IT staff
I want to document my troubleshooting
So that customer and future techs understand work done

Acceptance Criteria:
âœ“ Status: ASSIGNED â†’ IN_PROGRESS
âœ“ Upload diagnostic photos (GCS)
âœ“ Add troubleshooting notes:
  - "Ran disk check. Found corrupted sectors."
  - "Reinstalled graphics driver."
  - Software installed: "Windows Update KB123456"
âœ“ Track time spent on diagnosis
âœ“ Update as work progresses
âœ“ Customer can see live progress

Test Cases:
- Add diagnostic notes â†’ Customer sees progress
- Upload photos â†’ Before/during visible
```

#### US9.4: Complete IT Service
```
As IT staff
I want to complete and document an IT service fix
So that customer has a record

Acceptance Criteria:
âœ“ Click "Complete Service"
âœ“ Upload after-photos (system running, screen clear, etc.)
âœ“ Final notes: "Issue resolved. Tested thoroughly. System stable."
âœ“ Solution summary: "Replaced HDD with SSD. Installed Windows 11. Installed Office."
âœ“ Recommended follow-ups: "Run monthly maintenance. Update drivers."
âœ“ Status: IN_PROGRESS â†’ RESOLVED
âœ“ Customer notified with full documentation
âœ“ Customer can rate technician
âœ“ Email with solution summary + photos

Test Cases:
- Complete service â†’ Documentation sent
- Customer rates â†’ Shows in profile
- Future tech can see what was done
```

---

### EPIC 10: EMAIL NOTIFICATIONS & COMMUNICATION

#### US10.1: Order Status Email Notifications
```
As a customer
I want to receive email notifications for order status changes
So that I'm updated without checking the app

Acceptance Criteria:
âœ“ Email sent when:
  - Order confirmed (immediate after checkout)
  - Salesman accepts (PENDING â†’ ACCEPTED)
  - Order preparing (ACCEPTED â†’ PREPARING)
  - Out for delivery (PREPARING â†’ OUT_FOR_DELIVERY)
  - Delivered (OUT_FOR_DELIVERY â†’ DELIVERED)
âœ“ Email includes:
  - Order #, items, total
  - Current status + what happens next
  - Track order link
  - Driver details (when applicable)
  - Estimated delivery time
âœ“ HTML formatted, mobile responsive
âœ“ Sent within 1 minute of status change
âœ“ Unsubscribe option in email footer

Test Cases:
- Create order â†’ Email arrives <5 min
- Status changes â†’ Email sent
- All emails received correctly
```

#### US10.2: Service Request Notifications
```
As a customer
I want to receive notifications for service progress
So that I'm informed and can prepare

Acceptance Criteria:
âœ“ Email sent when:
  - Service request received (confirmation)
  - Staff assigned (RECEIVED â†’ ASSIGNED)
  - Staff on the way (ASSIGNED â†’ IN_PROGRESS)
  - Service completed (IN_PROGRESS â†’ RESOLVED)
âœ“ Email includes:
  - Service #, type, customer
  - Staff name, phone, photo
  - Estimated arrival/completion
  - Special notes (bring equipment, etc.)
âœ“ HTML formatted
âœ“ Within 1 minute of status change

Test Cases:
- Create service â†’ Email confirmation
- Staff assigned â†’ Email with staff details
- Completion â†’ Email with after-photos
```

#### US10.3: Admin Alert Notifications
```
As an admin
I want to receive alerts for important system events
So that I can respond quickly

Acceptance Criteria:
âœ“ Alerts sent for:
  - New user registration waiting approval
  - Order cancellation
  - Service cancellation
  - Staff member decline (order/service)
  - Payment failure (future)
  - Stock critically low
âœ“ Email includes:
  - Event description
  - Action link (approve user, view order, etc.)
âœ“ Summary email: Daily at 9 AM with pending approvals

Test Cases:
- New registration â†’ Admin gets alert
- Order canceled â†’ Admin notified
```

---

### EPIC 11: SYSTEM & SECURITY

#### US11.1: Two-Factor Authentication (Optional Future)
```
As a customer
I want to enable two-factor authentication
So that my account is more secure

Acceptance Criteria:
âœ“ Settings > Security > Enable 2FA
âœ“ Choose: SMS OTP or Email OTP
âœ“ Send test OTP
âœ“ Verify OTP entered correctly
âœ“ Backup codes generated (10 codes)
âœ“ Enabled: require OTP on login
âœ“ Can disable anytime

Test Cases:
- Enable 2FA â†’ OTP required on login
- Use backup code â†’ Works if SMS fails
```

#### US11.2: Session Management & Logout
```
As a customer
I want my session to expire and be logged out
So that my account is secure if I forget to logout

Acceptance Criteria:
âœ“ JWT token valid for 30 days
âœ“ Inactivity timeout: 1 hour (after 1 hour no activity, auto logout)
âœ“ "Remember me" checkbox: extends to 90 days
âœ“ Logout button: clears JWT, deletes cookie
âœ“ Session ends: page redirects to login
âœ“ "Session expired" message on timeout
âœ“ Can logout from multiple devices (future: session management)

Test Cases:
- Logout â†’ Redirected to login
- Inactivity 1 hour â†’ Auto logout
- Remember me â†’ Session extends to 90 days
```

#### US11.3: Data Privacy & GDPR
```
As a customer
I want to control my personal data
So that I comply with privacy regulations

Acceptance Criteria:
âœ“ Profile > Privacy
âœ“ "Download my data": ZIP with all personal info (JSON format)
âœ“ "Delete my account": 
  - Confirmation dialog
  - Data anonymized in database
  - Orders/services kept for legal (no name)
  - 30-day grace period (can restore)
âœ“ Marketing emails: Unsubscribe option
âœ“ Data retention: 2 years for legal, then auto-deleted

Test Cases:
- Download data â†’ ZIP contains all info
- Delete account â†’ Data anonymized
- Can restore within 30 days
```

#### US11.4: Audit Logging
```
As the system
I want to log all important actions
So that we have compliance records

Acceptance Criteria:
âœ“ Log every:
  - User login/logout
  - Order creation, status change, cancellation
  - Service request, assignment, completion
  - Staff role change, suspension
  - Admin actions (approve, delete, etc.)
âœ“ Log includes:
  - What (action type)
  - Who (actor name, ID)
  - When (timestamp)
  - Where (IP address)
  - Result (success/failure)
âœ“ Logs stored in AuditLog table (immutable)
âœ“ Retention: 2 years minimum
âœ“ Encryption: database SSL/TLS

Test Cases:
- Create order â†’ Logged to AuditLog
- Cancel order â†’ Reason logged
- View logs â†’ All changes visible
- Export logs â†’ CSV for audit
```

---

## PART 3: FEATURE PRIORITIZATION MATRIX

### Priority Legend
- ðŸ”´ **P0 (Critical):** Must have for MVP launch (Week 1-4)
- ðŸŸ  **P1 (High):** Important, needed soon (Week 5-6)
- ðŸŸ¡ **P2 (Medium):** Nice to have, next phase (Weeks 7-8)
- ðŸ”µ **P3 (Low):** Future phases, can wait (Year 2+)

### By Role & Priority

**CUSTOMER (P0 Features - MVP)**
- F1: Registration âœ…
- F2: Email Verification âœ…
- F3: Admin Approval âœ…
- F4: Login âœ…
- F10: Browse Food âœ…
- F11: Filter Category âœ…
- F13: Search âœ…
- F14: Item Details âœ…
- F17: Add to Cart âœ…
- F19: Update Quantity âœ…
- F22: Cart Summary âœ…
- F25: Delivery Address âœ…
- F29: Order Summary âœ…
- F32: Create Order âœ…
- F33: Confirmation Email âœ…
- F35: Order History âœ…
- F36: Status Timeline âœ…
- F44: Service Request âœ…
- F45: Upload Photos âœ…
- F46: Schedule Service âœ…

**ADMIN (P0 Features - MVP)**
- F54: User Approval Queue âœ…
- F55: Approve User âœ…
- F57: View All Users âœ…
- F59: Change Role âœ…
- F64: Create Category âœ…
- F68: Create Food Item âœ…
- F70: Upload Item Photo âœ…
- F76: View All Orders âœ…
- F77: Filter Orders âœ…
- F79: Order Details âœ…
- F80: Assign Salesman âœ…
- F81: Assign Driver âœ…
- F86: Service Queue âœ…
- F90: Assign to Staff âœ…

**SALESMAN (P0 Features - MVP)**
- F111: View Assigned Orders âœ…
- F112: Filter by Status âœ…
- F114: Customer Details âœ…
- F115: View Items âœ…
- F116: Accept Order âœ…
- F117: Mark Preparing âœ…
- F119: Decline Order âœ…

**DRIVER (P0 Features - MVP)**
- F124: Delivery Queue âœ…
- F125: Delivery Details âœ…
- F128: Accept Delivery âœ…
- F130: Confirm Delivery âœ…
- F131: Upload Proof Photo âœ…

**CLEANER (P0 Features - MVP)**
- F139: View Services âœ…
- F140: Service Details âœ…
- F143: Accept Assignment âœ…
- F145: Mark In Progress âœ…
- F148: Complete Service âœ…
- F149: Upload After Photos âœ…

**IT STAFF (P0 Features - MVP)**
- F156: View IT Services âœ…
- F157: Issue Details âœ…
- F159: Accept Service âœ…
- F161: Start Work âœ…
- F164: Complete Service âœ…

---

## PART 4: FEATURE COMPLETION TRACKING

### MVP Launch (Week 8) - Target: 100% of P0 Features

| Feature | Status | Assigned To | Est. Hours | Actual Hours |
|---------|--------|-------------|-----------|--------------|
| User Auth (F1-F4) | ðŸ”´ Not Started | Backend Team | 16 | - |
| Food Catalog (F10-F16) | ðŸ”´ Not Started | Frontend + Backend | 24 | - |
| Shopping Cart (F17-F24) | ðŸ”´ Not Started | Frontend | 12 | - |
| Checkout (F25-F34) | ðŸ”´ Not Started | Frontend + Backend | 20 | - |
| Order Tracking (F35-F43) | ðŸ”´ Not Started | Frontend + Backend | 16 | - |
| Service Requests (F44-F53) | ðŸ”´ Not Started | Backend | 24 | - |
| Admin Dashboard (F54-F110) | ðŸ”´ Not Started | Frontend + Backend | 40 | - |
| Salesman Dashboard (F111-F122) | ðŸ”´ Not Started | Frontend + Backend | 16 | - |
| Driver Dashboard (F124-F138) | ðŸ”´ Not Started | Frontend + Backend | 14 | - |
| Cleaner Dashboard (F139-F155) | ðŸ”´ Not Started | Frontend + Backend | 12 | - |
| IT Staff Dashboard (F156-F171) | ðŸ”´ Not Started | Frontend + Backend | 12 | - |
| Emails (F10.1-F10.3) | ðŸ”´ Not Started | Backend | 8 | - |

**Total Estimated Hours (P0): 214 hours**  
**8-week sprint (40 hrs/week):** 320 hours available  
**Buffer:** 106 hours for testing, fixes, deployment

---

## DOCUMENT STATUS

- **Version:** 1.0 (Complete)
- **Created:** December 9, 2025
- **Total Features:** 171 features across 11 epics
- **User Stories:** 100+ detailed acceptance criteria
- **Coverage:** 100% of system requirements
- **Ready:** For development team kickoff

---

**NEXT STEPS:**

1. âœ… Review all features with stakeholders
2. âœ… Assign features to team members
3. âœ… Estimate actual hours (refine estimates)
4. âœ… Create GitHub issues from user stories
5. âœ… Start Week 1 implementation

---

**Created by:** Technical Team  
**Approved by:** [Project Lead]  
**Last Updated:** December 9, 2025