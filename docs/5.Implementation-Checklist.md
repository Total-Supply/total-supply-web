# IMPLEMENTATION CHECKLIST

## PostgreSQL + GCS + Vercel Stack

**Project:** Full-Stack E-Commerce & Service Platform  
**Start Date:** [Your Date]  
**Target Completion:** 8 weeks from start

---

## PHASE 1: SETUP & INFRASTRUCTURE (Week 1-2)

### Week 1: Database Setup

- [x] **Day 1-2: Neon PostgreSQL**
  - [x] Create Neon account (https://neon.tech)
  - [x] Create project: "myapp-prod"
  - [x] Copy DATABASE_URL connection string
  - [x] Test connection from local machine
  - [x] Create `.env.local` with DATABASE_URL
  - [x] Estimate: 30 minutes

- [x] **Day 3: GCS Bucket Setup**
  - [x] Create Google Cloud project (https://console.cloud.google.com)
  - [x] Enable Cloud Storage API
  - [x] Create bucket: "myapp-uploads-[unique-id]"
  - [x] Region: asia-southeast1 (Singapore)
  - [x] Storage class: Standard
  - [x] Block public access (ENFORCED)
  - [x] Create service account: "app-uploader"
  - [x] Download JSON key
  - [x] Add env vars: GCS_PROJECT_ID, GCS_CLIENT_EMAIL, GCS_PRIVATE_KEY
  - [x] Test connection script (see Implementation Guide)
  - [x] Estimate: 45 minutes

- [ ] **Day 4-5: Vercel & GitHub Setup**
  - [ ] Create GitHub repository
  - [ ] Connect to Vercel (https://vercel.com)
  - [ ] Enable preview deployments
  - [ ] Set up environment variables in Vercel
  - [ ] Test: Push to main branch, verify auto-deployment
  - [ ] Estimate: 1 hour

### Week 2: Next.js Project Init

- [x] **Day 1: Initialize Project**
  - [x] `npx create-next-app@latest myapp`
  - [x] ✅ Use App Router
  - [x] ✅ Use TypeScript
  - [x] ✅ Use Tailwind CSS
  - [x] Install dependencies:
    - [x] `npm install @prisma/client prisma`
    - [x] `npm install next-auth`
    - [x] `npm install react-hook-form zod @hookform/resolvers`
    - [x] `npm install @google-cloud/storage`
    - [x] `npm install nodemailer`
    - [x] `npm install redux @reduxjs/toolkit react-redux`
    - [x] `npm install @tanstack/react-query` (RTK Query alternative)

- [x] **Day 2-3: Prisma Schema**
  - [x] `npx prisma init`
  - [x] Copy schema from TSD (Section 5.2)
  - [x] Create database: `npx prisma migrate dev --name init`
  - [x] Verify tables in Neon console
  - [x] Open Prisma Studio: `npx prisma studio`
  - [x] Check all tables created correctly

- [x] **Day 4-5: NextAuth Configuration**
  - [x] Create `lib/auth.ts` (see Implementation Guide Part 2.1)
  - [x] Configure credentials provider with bcrypt
  - [x] Test login/register locally
  - [x] Verify JWT tokens in cookies

### Completion Check (Week 2)

- [x] Database running on Neon
- [x] GCS bucket accessible via signed URLs
- [] Vercel deployed (even if empty)
- [x] NextAuth configured
- [x] Prisma migrations working

---

## PHASE 2: CORE API ROUTES (Week 3-4)

### Week 3: Authentication & Upload

- [x] **Day 1-2: Auth Endpoints**
  - [x] `/api/auth/register` - Create account + email verification
  - [x] `/api/auth/callback/credentials` - Login (NextAuth)
  - [x] `/api/auth/signout` - Logout
  - [x] `/api/auth/session` - Get session
  - [x] `/api/auth/login` - Login endpoint
  - [x] `/api/auth/me` - Get current user
  - [x] `/api/auth/update-profile` - Update user profile
  - [ ] `/api/auth/verify-email` - Verify email token
  - [x] Email sending with Nodemailer
  - [x] Password hashing with bcrypt
  - [ ] Test with Postman/Insomnia

- [x] **Day 3-4: Upload Endpoint**
  - [x] `/api/upload` - Generate signed URL (Part 2.1 of Implementation Guide)
  - [x] Rate limiting (10 uploads/hour per user)
  - [x] File validation (type, size <5MB)
  - [ ] Test file upload to GCS
  - [ ] Verify public URL works

- [ ] **Day 5: Image Management**
  - [ ] Implement useImageUpload hook (Part 3.1)
  - [ ] Create test component with upload
  - [ ] Verify image appears in GCS console
  - [ ] Check CDN URL accessible

### Week 4: Orders & Services

- [ ] **Day 1-2: Order Creation**
  - [ ] `/api/orders` POST - Create order
  - [ ] Calculate total price
  - [ ] Validate stock levels
  - [ ] Create OrderItem records
  - [ ] Log to AuditLog
  - [ ] Send confirmation email (Nodemailer)

- [ ] **Day 3-4: Order Management**
  - [ ] `/api/orders` GET - List orders (with pagination)
  - [ ] `/api/orders/[id]` GET - Get order details
  - [ ] `/api/orders/[id]/status` PATCH - Update status
  - [ ] Implement status machine (PENDING → ACCEPTED → PREPARING → OUT_FOR_DELIVERY → DELIVERED)
  - [ ] Email notifications on status change

- [ ] **Day 5: Service Requests (Basic)**
  - [ ] `/api/services` POST - Create service request
  - [ ] `/api/services` GET - List requests
  - [ ] `/api/services/[id]/status` PATCH - Update status

### Completion Check (Week 4)

- [ ] Can register & login
- [ ] Can create orders with images
- [ ] Can track order status
- [ ] Emails sent on important events
- [ ] All endpoints tested with Postman

---

## PHASE 3: FRONTEND COMPONENTS (Week 5-6)

### Week 5: Pages & Components

- [ ] **Landing Page**
  - [ ] Hero section
  - [ ] Services grid (Food, Cleaning, IT)
  - [ ] Testimonials carousel
  - [ ] CTA buttons (Register, Contact)
  - [ ] Responsive mobile design

- [ ] **Authentication Pages**
  - [ ] `/register` - Registration form
  - [ ] `/login` - Login form
  - [ ] `/verify-email` - Email verification
  - [ ] Navigation (protected routes)

- [ ] **Food Browsing**
  - [ ] `/shop` - Category & item browser
  - [ ] Filter by category, price, search
  - [ ] ProductCard component (image from GCS)
  - [ ] Add to cart (Redux action)

### Week 6: Dashboard & Forms

- [ ] **Customer Portal**
  - [ ] `/dashboard/customer/orders` - Order history
  - [ ] `/dashboard/customer/orders/[id]` - Order detail + timeline
  - [ ] `/dashboard/customer/services` - Service requests
  - [ ] `/checkout` - Checkout flow with image upload
  - [ ] OrderForm component (Part 3.2 of Implementation Guide)

- [ ] **Admin Dashboard (Minimal MVP)**
  - [ ] `/dashboard/admin/users` - User approval queue
  - [ ] `/dashboard/admin/orders` - Order list
  - [ ] `/dashboard/admin/services` - Service queue

### Completion Check (Week 6)

- [ ] All pages responsive on mobile
- [ ] Images loading from GCS CDN
- [ ] Cart persists (Redux)
- [ ] Forms validate with Zod
- [ ] Navigation working correctly

---

## PHASE 4: STAFF DASHBOARDS (Week 7)

### Salesman Dashboard

- [ ] `/dashboard/staff/salesman/orders` - Assigned orders
- [ ] Accept order (status PENDING → ACCEPTED)
- [ ] Mark preparing (status → PREPARING)
- [ ] Confirm status changes

### Driver Dashboard

- [ ] `/dashboard/staff/driver/deliveries` - Delivery queue
- [ ] Mark "Out for Delivery"
- [ ] Photo upload for delivery proof
- [ ] Confirm delivery (with GCS image)

### Cleaner/IT Staff Dashboard

- [ ] `/dashboard/staff/services` - Assigned jobs
- [ ] Accept/decline assignment
- [ ] Update progress (In Progress)
- [ ] Complete job with notes + before/after photos

### Completion Check (Week 7)

- [ ] Each staff role sees only their dashboard
- [ ] Status transitions logged in AuditLog
- [ ] Photos uploaded to GCS
- [ ] All roles can upload images

---

## PHASE 5: TESTING & LAUNCH (Week 8)

### Monday-Wednesday: Testing

- [ ] **Unit Tests**
  - [ ] `npm run test` passes
  - [ ] Test API rate limiting
  - [ ] Test order status transitions
  - [ ] Test image upload validation

- [ ] **Integration Tests**
  - [ ] Register → Login → Order flow
  - [ ] Order creation → Staff accepts → Delivery
  - [ ] Service request → Assignment → Completion

- [ ] **Security Audit**
  - [ ] No hardcoded secrets in code
  - [ ] Environment variables set in Vercel
  - [ ] GCS bucket not public
  - [ ] Database SSL/TLS enforced
  - [ ] CORS locked to own domain
  - [ ] Rate limiting working
  - [ ] Passwords hashed (bcrypt)

- [ ] **Performance Testing**
  - [ ] Page load time < 2 seconds
  - [ ] API response < 500ms
  - [ ] Image upload < 3 seconds
  - [ ] Database queries < 200ms
  - [ ] Load test: 100 concurrent users

### Thursday-Friday: Pre-Launch

- [ ] **Production Checklist**
  - [ ] Database backups enabled (Neon default)
  - [ ] Sentry error tracking configured
  - [ ] Email service tested (SendGrid/Nodemailer)
  - [ ] All env vars set in Vercel (not in .env)
  - [ ] Audit logs being recorded
  - [ ] HTTPS enforced

- [ ] **Documentation**
  - [ ] README.md (setup instructions)
  - [ ] API documentation (Postman collection)
  - [ ] Database schema diagram
  - [ ] Deployment guide

- [ ] **Team Training**
  - [ ] Admin user training (user approval, orders)
  - [ ] Salesman training (accept/prepare)
  - [ ] Driver training (delivery confirmation)
  - [ ] Support team training

### Friday: GO LIVE

- [ ] **Final Checks**
  - [ ] Test registration as new user
  - [ ] Test order creation start-to-finish
  - [ ] Verify emails sending
  - [ ] Check dashboard loads quickly
  - [ ] Confirm Vercel logs show no errors

- [ ] **Launch & Monitor**
  - [ ] Push to main branch (auto-deploys to Vercel)
  - [ ] Monitor Sentry for errors
  - [ ] Check Vercel analytics for performance
  - [ ] Monitor database connections (Neon)
  - [ ] Monitor GCS storage (Google Cloud)

---

## DAILY STANDUPS (Throughout 8 Weeks)

### Daily Check-In Template

```
Yesterday:
├─ What was completed?
├─ Were there blockers?
└─ Time spent on each task?

Today:
├─ What will be completed?
├─ Expected blockers?
└─ Time estimates?

Blockers:
├─ Any technical issues?
├─ Resource constraints?
└─ Dependencies needed?
```

---

## CRITICAL PATH (Must Not Delay)

1. **Week 1 End:** Database + GCS + Vercel working
2. **Week 2 End:** NextAuth + Prisma migrations complete
3. **Week 4 End:** All API routes tested
4. **Week 6 End:** All frontend pages responsive
5. **Week 7 End:** Staff dashboards working
6. **Week 8 End:** PRODUCTION DEPLOYMENT ✅

---

## RISK LOG

| Risk                        | Mitigation              | Owner    | Status |
| --------------------------- | ----------------------- | -------- | ------ |
| Neon connection limit       | Use Prisma pooling      | Backend  | ☐      |
| GCS bucket misconfiguration | Follow signed URL guide | DevOps   | ☐      |
| Image upload fails          | Retry mechanism         | Frontend | ☐      |
| Database migration issues   | Test in staging first   | Database | ☐      |
| Email delivery failures     | Queue in DB + retry     | Backend  | ☐      |
| Performance degradation     | Load test weekly        | DevOps   | ☐      |

---

## BUDGET TRACKING

### Week 1-2 (Setup)

- [ ] Neon: LKR 0 (free tier)
- [ ] GCS: LKR 0 (free tier)
- [ ] Vercel: LKR 0 (free tier)
- [ ] **Subtotal: LKR 0**

### Week 3-8 (Development)

- [ ] Neon: LKR 0 (free tier)
- [ ] GCS: LKR 0-650 (free 5GB/month)
- [ ] Vercel: LKR 0 (free tier)
- [ ] **Subtotal: LKR 0-650**

### Total Launch Cost: **LKR 0-650** (₹5-10 USD)

---

## SIGN-OFF

- [ ] **Project Manager**: **\*\***\_**\*\*** Date: **\_**
- [ ] **Tech Lead**: **\*\***\_**\*\*** Date: **\_**
- [ ] **Product Owner**: **\*\***\_**\*\*** Date: **\_**

---

## RESOURCES & REFERENCES

### Documentation

- TSD: `TSD-PostgreSQL-GCS-Final.md`
- Implementation: `Implementation-Guide-LKR.md`
- Architecture: `Architecture-Decision-Analysis.md`
- Stack Decision: `Stack-Decision-Summary.md`

### External Links

- **Neon Docs:** https://neon.tech/docs
- **GCS Guide:** https://cloud.google.com/storage/docs
- **Vercel Docs:** https://vercel.com/docs
- **Prisma Docs:** https://www.prisma.io/docs
- **NextAuth Docs:** https://next-auth.js.org

### Slack Channels

- #general
- #engineering
- #devops
- #questions

### Weekly Meetings

- **Monday 9 AM:** Sprint planning
- **Wednesday 3 PM:** Mid-week sync
- **Friday 4 PM:** Sprint review + retrospective

---

## SUCCESS METRICS (End of Week 8)

✅ **System is Live**

- Production URL: https://your-app.vercel.app
- Database: Neon PostgreSQL running
- Storage: GCS bucket with images
- Email: Nodemailer sending confirmations

✅ **Functionality Complete**

- Users can register, login, create orders
- Staff can accept/update orders
- Drivers can confirm deliveries with photos
- Admins can approve users & manage catalog

✅ **Quality Metrics**

- Page load < 2 seconds (90th percentile)
- Uptime > 99%
- Error rate < 0.1%
- Zero security vulnerabilities

✅ **Operational**

- Team trained on all dashboards
- Support docs written
- Monitoring configured (Sentry)
- Backup strategy confirmed

---

**Document Created:** December 9, 2025  
**Status:** ACTIVE  
**Next Update:** After Week 4 (mid-project checkpoint)

---

**For questions or blockers:** Create GitHub issue or Slack message in #engineering
